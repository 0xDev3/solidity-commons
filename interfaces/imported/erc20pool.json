{
  "schema": "../schema.json",
  "tags": [
    "tokens"
  ],
  "name": "Erc20Pool",
  "description": "Funding pool contract for any ERC-20 token. See the base `Pool` contract docs for more details.",
  "eventDecorators": [],
  "functionDecorators": [
    {
      "signature": "AMT_PER_SEC_UNCHANGED()",
      "name": "AMT_PER_SEC_UNCHANGED",
      "description": "The amount passed as the amount per second to keep the parameter unchanged.",
      "parameterDecorators": [],
      "returnDecorators": [
        {
          "name": "param0",
          "description": "",
          "recommendedTypes": [],
          "solidityType": "uint128"
        }
      ],
      "emittableEvents": [],
      "readOnly": true
    },
    {
      "signature": "PROXY_WEIGHTS_COUNT_MAX()",
      "name": "PROXY_WEIGHTS_COUNT_MAX",
      "description": "Maximum number of receivers of a single proxy. Whenever a proxy is added to a sender, this number is added to its `weightCount`. Limits costs of changes in sender's or proxy's configuration.",
      "parameterDecorators": [],
      "returnDecorators": [
        {
          "name": "param0",
          "description": "",
          "recommendedTypes": [],
          "solidityType": "uint32"
        }
      ],
      "emittableEvents": [],
      "readOnly": true
    },
    {
      "signature": "PROXY_WEIGHTS_SUM()",
      "name": "PROXY_WEIGHTS_SUM",
      "description": "The sum of all receiver weights of a single proxy. It must remain constant throughout the whole life of a proxy. A sender's weight of a proxy must always be a multiple of this value. Limits loss of per-second funding accuracy.",
      "parameterDecorators": [],
      "returnDecorators": [
        {
          "name": "param0",
          "description": "",
          "recommendedTypes": [],
          "solidityType": "uint32"
        }
      ],
      "emittableEvents": [],
      "readOnly": true
    },
    {
      "signature": "SENDER_WEIGHTS_COUNT_MAX()",
      "name": "SENDER_WEIGHTS_COUNT_MAX",
      "description": "Maximum number of receivers of a single sender. Limits costs of changes in sender's configuration.",
      "parameterDecorators": [],
      "returnDecorators": [
        {
          "name": "param0",
          "description": "",
          "recommendedTypes": [],
          "solidityType": "uint32"
        }
      ],
      "emittableEvents": [],
      "readOnly": true
    },
    {
      "signature": "SENDER_WEIGHTS_SUM_MAX()",
      "name": "SENDER_WEIGHTS_SUM_MAX",
      "description": "Maximum sum of all receiver weights of a single sender. Limits loss of per-second funding accuracy, they are always multiples of weights sum.",
      "parameterDecorators": [],
      "returnDecorators": [
        {
          "name": "param0",
          "description": "",
          "recommendedTypes": [],
          "solidityType": "uint32"
        }
      ],
      "emittableEvents": [],
      "readOnly": true
    },
    {
      "signature": "WITHDRAW_ALL()",
      "name": "WITHDRAW_ALL",
      "description": "The amount passed as the withdraw amount to withdraw all the funds.",
      "parameterDecorators": [],
      "returnDecorators": [
        {
          "name": "param0",
          "description": "",
          "recommendedTypes": [],
          "solidityType": "uint128"
        }
      ],
      "emittableEvents": [],
      "readOnly": true
    },
    {
      "signature": "collect()",
      "name": "collect",
      "description": "Collects all received funds available for collection by a sender of the message and sends them to that sender.",
      "parameterDecorators": [],
      "returnDecorators": [],
      "emittableEvents": [],
      "readOnly": false
    },
    {
      "signature": "collectable()",
      "name": "collectable",
      "description": "Returns amount of received funds available for collection by the sender of the message.",
      "parameterDecorators": [],
      "returnDecorators": [
        {
          "name": "_0",
          "description": "collected The available amount.",
          "recommendedTypes": [],
          "solidityType": "uint128"
        }
      ],
      "emittableEvents": [],
      "readOnly": true
    },
    {
      "signature": "cycleSecs()",
      "name": "cycleSecs",
      "description": "On every timestamp `T`, which is a multiple of `cycleSecs`, the receivers gain access to funds collected during `T - cycleSecs` to `T - 1`.",
      "parameterDecorators": [],
      "returnDecorators": [
        {
          "name": "param0",
          "description": "",
          "recommendedTypes": [],
          "solidityType": "uint64"
        }
      ],
      "emittableEvents": [],
      "readOnly": true
    },
    {
      "signature": "erc20()",
      "name": "erc20",
      "description": "The address of the ERC-20 contract which tokens the pool works with.",
      "parameterDecorators": [],
      "returnDecorators": [
        {
          "name": "param0",
          "description": "",
          "recommendedTypes": [],
          "solidityType": "address"
        }
      ],
      "emittableEvents": [],
      "readOnly": true
    },
    {
      "signature": "getAllReceivers()",
      "name": "getAllReceivers",
      "description": "Gets the receivers and the proxies to whom the sender of the message sends funds. Each entry contains weights, which regulate the share of the amount being sent every second in relation to other sender's receivers and proxies.",
      "parameterDecorators": [],
      "returnDecorators": [
        {
          "name": "weights",
          "description": "The list of receiver and proxy addresses and their weights. Each entry has at least one non-zero weight.",
          "recommendedTypes": [],
          "solidityType": "tuple[]"
        }
      ],
      "emittableEvents": [],
      "readOnly": true
    },
    {
      "signature": "getAmtPerSec()",
      "name": "getAmtPerSec",
      "description": "Gets the target amount sent every second from the sender of the message. The actual amount sent every second may differ from the target value. It's rounded down to the closest multiple of the sum of the weights of the sender's receivers and proxies and split between them proportionally to their weights. Each receiver and proxy then receives their part from the sender's balance. If zero, funding is stopped.",
      "parameterDecorators": [],
      "returnDecorators": [
        {
          "name": "amt",
          "description": "The target amount to be sent every second.",
          "recommendedTypes": [],
          "solidityType": "uint128"
        }
      ],
      "emittableEvents": [],
      "readOnly": true
    },
    {
      "signature": "getProxyWeights()",
      "name": "getProxyWeights",
      "description": "Gets the receivers to whom the proxy of the sender of the message passes funds. Each entry contains weights, which regulate the share of the amount being sent every second in relation to other proxy's receivers.",
      "parameterDecorators": [],
      "returnDecorators": [
        {
          "name": "weights",
          "description": "The list of receiver addresses and their non-zero weights.",
          "recommendedTypes": [],
          "solidityType": "tuple[]"
        }
      ],
      "emittableEvents": [],
      "readOnly": true
    },
    {
      "signature": "setProxyWeights(tuple(address,uint32)[])",
      "name": "setProxyWeights",
      "description": "Sets the weight of a proxy owned by the sender of the message. The weight regulates the share of the amount being sent every second in relation to other proxy's receivers. The amount sent to a proxy will be split and passed further to the receivers of the proxy. Setting weights for a proxy for the first time creates it, only then senders can use it. From inception the sum of proxy's receivers' weights must be equal to `PROXY_WEIGHTS_SUM`.",
      "parameterDecorators": [
        {
          "name": "weights",
          "description": "The updated weights of the proxy receivers. Setting a non-zero weight for a new proxy adds it to the list of proxy's receivers. Setting the zero weight for a proxy removes it from the list of proxy's receivers. Omitting a receiver from the list leaves it unchanged.",
          "recommendedTypes": [],
          "parameters": [
            {
              "name": "receiver",
              "description": "",
              "type": "address"
            },
            {
              "name": "weight",
              "description": "",
              "type": "uint32"
            }
          ]
        }
      ],
      "returnDecorators": [],
      "emittableEvents": [],
      "readOnly": false
    },
    {
      "signature": "updateSender(uint128,uint128,uint128,tuple(address,uint32)[],tuple(address,uint32)[])",
      "name": "updateSender",
      "description": "Updates all the sender parameters of the sender of the message. Tops up and withdraws unsent funds from the balance of the sender. The sender must first grant the contract a sufficient allowance to top up. Sends the withdrawn funds to the sender of the message. Sets the target amount sent every second from the sender of the message. Every second this amount is rounded down to the closest multiple of the sum of the weights of the receivers and proxies and split between them proportionally to their weights. Each receiver and proxy then receives their part from the sender's balance. If set to zero, stops funding. Sets the weight of the provided receivers and proxies of the sender of the message. The weight regulates the share of the amount sent every second that each of the sender's receivers and proxies get. Setting a non-zero weight for a new receiver or a new proxy adds it to the list of the sender's receivers. Setting zero as the weight for a receiver or a proxy removes it from the list of the sender's receivers.",
      "parameterDecorators": [
        {
          "name": "topUpAmt",
          "description": "The topped up amount.",
          "recommendedTypes": []
        },
        {
          "name": "withdraw",
          "description": "The amount to be withdrawn, must not be higher than available funds. Can be `WITHDRAW_ALL` to withdraw everything.",
          "recommendedTypes": []
        },
        {
          "name": "amtPerSec",
          "description": "The target amount to be sent every second. Can be `AMT_PER_SEC_UNCHANGED` to keep the amount unchanged.",
          "recommendedTypes": []
        },
        {
          "name": "updatedReceivers",
          "description": "The list of the updated receivers and their new weights.",
          "recommendedTypes": [],
          "parameters": [
            {
              "name": "receiver",
              "description": "",
              "type": "address"
            },
            {
              "name": "weight",
              "description": "",
              "type": "uint32"
            }
          ]
        },
        {
          "name": "updatedProxies",
          "description": "The list of the updated proxies and their new weights.",
          "recommendedTypes": [],
          "parameters": [
            {
              "name": "receiver",
              "description": "",
              "type": "address"
            },
            {
              "name": "weight",
              "description": "",
              "type": "uint32"
            }
          ]
        }
      ],
      "returnDecorators": [],
      "emittableEvents": [],
      "readOnly": false
    },
    {
      "signature": "withdrawable()",
      "name": "withdrawable",
      "description": "Returns amount of unsent funds available for withdrawal by the sender of the message.",
      "parameterDecorators": [],
      "returnDecorators": [
        {
          "name": "_0",
          "description": "balance The available balance.",
          "recommendedTypes": [],
          "solidityType": "uint128"
        }
      ],
      "emittableEvents": [],
      "readOnly": true
    }
  ]
}
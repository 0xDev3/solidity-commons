{"schema":"../schema.json","tags":[],"name":"OptionMarket","description":"OptionMarket. An AMM which allows users to trade options. Supports both buying and selling options, which determine the value for the listing's IV. Also allows for auto cash settling options as at expiry.","eventDecorators":[{"signature":"BoardBaseIvSet(uint256,uint256)","name":"BoardBaseIvSet","description":"Events ///. Emitted when a Board new baseIv is set.","parameterDecorators":[{"name":"boardId","description":"","recommendedTypes":[],"indexed":true},{"name":"baseIv","description":"","recommendedTypes":[],"indexed":false}]},{"signature":"BoardCreated(uint256,uint256,uint256)","name":"BoardCreated","description":"Events ///. Emitted when a Board is created.","parameterDecorators":[{"name":"boardId","description":"","recommendedTypes":[],"indexed":true},{"name":"expiry","description":"","recommendedTypes":[],"indexed":false},{"name":"baseIv","description":"","recommendedTypes":[],"indexed":false}]},{"signature":"BoardFrozen(uint256,bool)","name":"BoardFrozen","description":"Events ///. Emitted when a Board frozen is updated.","parameterDecorators":[{"name":"boardId","description":"","recommendedTypes":[],"indexed":true},{"name":"frozen","description":"","recommendedTypes":[],"indexed":false}]},{"signature":"BoardLiquidated(uint256,uint256,uint256,uint256,uint256,uint256)","name":"BoardLiquidated","description":"Events ///. Emitted when a Board is liquidated.","parameterDecorators":[{"name":"boardId","description":"","recommendedTypes":[],"indexed":true},{"name":"totalUserLongProfitQuote","description":"","recommendedTypes":[],"indexed":false},{"name":"totalBoardLongCallCollateral","description":"","recommendedTypes":[],"indexed":false},{"name":"totalBoardLongPutCollateral","description":"","recommendedTypes":[],"indexed":false},{"name":"totalAMMShortCallProfitBase","description":"","recommendedTypes":[],"indexed":false},{"name":"totalAMMShortPutProfitQuote","description":"","recommendedTypes":[],"indexed":false}]},{"signature":"ListingAdded(uint256,uint256,uint256,uint256)","name":"ListingAdded","description":"Events ///. Emitted when a Listing is added to a board.","parameterDecorators":[{"name":"boardId","description":"","recommendedTypes":[],"indexed":true},{"name":"listingId","description":"","recommendedTypes":[],"indexed":true},{"name":"strike","description":"","recommendedTypes":[],"indexed":false},{"name":"skew","description":"","recommendedTypes":[],"indexed":false}]},{"signature":"ListingSkewSet(uint256,uint256)","name":"ListingSkewSet","description":"Events ///. Emitted when a Listing new skew is set.","parameterDecorators":[{"name":"listingId","description":"","recommendedTypes":[],"indexed":true},{"name":"skew","description":"","recommendedTypes":[],"indexed":false}]},{"signature":"OwnershipTransferred(address,address)","name":"OwnershipTransferred","description":"Events ///.","parameterDecorators":[{"name":"previousOwner","description":"","recommendedTypes":[],"indexed":true},{"name":"newOwner","description":"","recommendedTypes":[],"indexed":true}]},{"signature":"PositionClosed(address,uint256,uint8,uint256,uint256)","name":"PositionClosed","description":"Events ///. Emitted when a Position is closed.","parameterDecorators":[{"name":"trader","description":"","recommendedTypes":[],"indexed":true},{"name":"listingId","description":"","recommendedTypes":[],"indexed":true},{"name":"tradeType","description":"","recommendedTypes":[],"indexed":true},{"name":"amount","description":"","recommendedTypes":[],"indexed":false},{"name":"totalCost","description":"","recommendedTypes":[],"indexed":false}]},{"signature":"PositionOpened(address,uint256,uint8,uint256,uint256)","name":"PositionOpened","description":"Events ///. Emitted when a Position is opened.","parameterDecorators":[{"name":"trader","description":"","recommendedTypes":[],"indexed":true},{"name":"listingId","description":"","recommendedTypes":[],"indexed":true},{"name":"tradeType","description":"","recommendedTypes":[],"indexed":true},{"name":"amount","description":"","recommendedTypes":[],"indexed":false},{"name":"totalCost","description":"","recommendedTypes":[],"indexed":false}]}],"functionDecorators":[{"signature":"addListingToBoard(uint256,uint256,uint256)","name":"addListingToBoard","description":"Add a listing to an existing board in the OptionMarket.","parameterDecorators":[{"name":"boardId","description":"The id of the board which the listing will be added.","recommendedTypes":[]},{"name":"strike","description":"Strike of the Listing.","recommendedTypes":[]},{"name":"skew","description":"Skew of the Listing.","recommendedTypes":[]}],"returnDecorators":[],"emittableEvents":[],"readOnly":false},{"signature":"boardToPriceAtExpiry(uint256)","name":"boardToPriceAtExpiry","description":"","parameterDecorators":[{"name":"param0","description":"","recommendedTypes":[]}],"returnDecorators":[{"name":"param0","description":"","recommendedTypes":[],"solidityType":"uint256"}],"emittableEvents":[],"readOnly":true},{"signature":"closePosition(uint256,uint8,uint256)","name":"closePosition","description":"Closes some amount of an open position. The user does not have to close the whole position.","parameterDecorators":[{"name":"_listingId","description":"The id of the relevant OptionListing.","recommendedTypes":[]},{"name":"tradeType","description":"Is the trade long or short?.","recommendedTypes":[]},{"name":"amount","description":"The amount the user has requested to trade.","recommendedTypes":[]}],"returnDecorators":[{"name":"totalCost","description":"","recommendedTypes":[],"solidityType":"uint256"}],"emittableEvents":[],"readOnly":false},{"signature":"createOptionBoard(uint256,uint256,uint256[],uint256[])","name":"createOptionBoard","description":"Creates a new OptionBoard which contains OptionListings. This only allows a new maxExpiryTimestamp to be added if the previous one has been passed. This is done to create a system of \"rounds\" where PnL for LPs can be computed easily across all boards.","parameterDecorators":[{"name":"expiry","description":"The timestamp when the board expires.","recommendedTypes":[]},{"name":"baseIV","description":"The initial value for implied volatility.","recommendedTypes":[]},{"name":"strikes","description":"The array of strikes offered for this expiry.","recommendedTypes":[]},{"name":"skews","description":"The array of skews for each strike.","recommendedTypes":[]}],"returnDecorators":[{"name":"param0","description":"","recommendedTypes":[],"solidityType":"uint256"}],"emittableEvents":[],"readOnly":false},{"signature":"getBoardListings(uint256)","name":"getBoardListings","description":"Returns the listing ids for a given `boardId`.","parameterDecorators":[{"name":"boardId","description":"The id of the relevant OptionBoard.","recommendedTypes":[]}],"returnDecorators":[{"name":"param0","description":"","recommendedTypes":[],"solidityType":"uint256[]"}],"emittableEvents":[],"readOnly":true},{"signature":"getLiveBoards()","name":"getLiveBoards","description":"Returns the list of live board ids.","parameterDecorators":[],"returnDecorators":[{"name":"_liveBoards","description":"","recommendedTypes":[],"solidityType":"uint256[]"}],"emittableEvents":[],"readOnly":true},{"signature":"init(address,address,address,address,address,address,address,address,string[])","name":"init","description":"Initialize the contract.","parameterDecorators":[{"name":"_globals","description":"LyraGlobals address.","recommendedTypes":[]},{"name":"_liquidityPool","description":"LiquidityPool address.","recommendedTypes":[]},{"name":"_optionPricer","description":"OptionMarketPricer address.","recommendedTypes":[]},{"name":"_greekCache","description":"OptionGreekCache address.","recommendedTypes":[]},{"name":"_shortCollateral","description":"","recommendedTypes":[]},{"name":"_optionToken","description":"","recommendedTypes":[]},{"name":"_quoteAsset","description":"Quote asset address.","recommendedTypes":[]},{"name":"_baseAsset","description":"Base asset address.","recommendedTypes":[]},{"name":"_errorMessages","description":"","recommendedTypes":[]}],"returnDecorators":[],"emittableEvents":[],"readOnly":false},{"signature":"liquidateExpiredBoard(uint256)","name":"liquidateExpiredBoard","description":"Liquidates a board that has passed expiry. This function will not preserve the ordering of liveBoards.","parameterDecorators":[{"name":"boardId","description":"The id of the relevant OptionBoard.","recommendedTypes":[]}],"returnDecorators":[],"emittableEvents":[],"readOnly":false},{"signature":"listingToBaseReturnedRatio(uint256)","name":"listingToBaseReturnedRatio","description":"","parameterDecorators":[{"name":"param0","description":"","recommendedTypes":[]}],"returnDecorators":[{"name":"param0","description":"","recommendedTypes":[],"solidityType":"uint256"}],"emittableEvents":[],"readOnly":true},{"signature":"maxExpiryTimestamp()","name":"maxExpiryTimestamp","description":"","parameterDecorators":[],"returnDecorators":[{"name":"param0","description":"","recommendedTypes":[],"solidityType":"uint256"}],"emittableEvents":[],"readOnly":true},{"signature":"openPosition(uint256,uint8,uint256)","name":"openPosition","description":"Opens a position, which may be long call, long put, short call or short put.","parameterDecorators":[{"name":"_listingId","description":"The id of the relevant OptionListing.","recommendedTypes":[]},{"name":"tradeType","description":"Is the trade long or short?.","recommendedTypes":[]},{"name":"amount","description":"The amount the user has requested to trade.","recommendedTypes":[]}],"returnDecorators":[{"name":"totalCost","description":"","recommendedTypes":[],"solidityType":"uint256"}],"emittableEvents":[],"readOnly":false},{"signature":"optionBoards(uint256)","name":"optionBoards","description":"","parameterDecorators":[{"name":"param0","description":"","recommendedTypes":[]}],"returnDecorators":[{"name":"id","description":"","recommendedTypes":[],"solidityType":"uint256"},{"name":"expiry","description":"","recommendedTypes":[],"solidityType":"uint256"},{"name":"iv","description":"","recommendedTypes":[],"solidityType":"uint256"},{"name":"frozen","description":"","recommendedTypes":[],"solidityType":"bool"}],"emittableEvents":[],"readOnly":true},{"signature":"optionListings(uint256)","name":"optionListings","description":"","parameterDecorators":[{"name":"param0","description":"","recommendedTypes":[]}],"returnDecorators":[{"name":"id","description":"","recommendedTypes":[],"solidityType":"uint256"},{"name":"strike","description":"","recommendedTypes":[],"solidityType":"uint256"},{"name":"skew","description":"","recommendedTypes":[],"solidityType":"uint256"},{"name":"longCall","description":"","recommendedTypes":[],"solidityType":"uint256"},{"name":"shortCall","description":"","recommendedTypes":[],"solidityType":"uint256"},{"name":"longPut","description":"","recommendedTypes":[],"solidityType":"uint256"},{"name":"shortPut","description":"","recommendedTypes":[],"solidityType":"uint256"},{"name":"boardId","description":"","recommendedTypes":[],"solidityType":"uint256"}],"emittableEvents":[],"readOnly":true},{"signature":"setBoardBaseIv(uint256,uint256)","name":"setBoardBaseIv","description":"Sets the baseIv of a frozen OptionBoard.","parameterDecorators":[{"name":"boardId","description":"The id of the OptionBoard.","recommendedTypes":[]},{"name":"baseIv","description":"The new baseIv value.","recommendedTypes":[]}],"returnDecorators":[],"emittableEvents":[],"readOnly":false},{"signature":"setBoardFrozen(uint256,bool)","name":"setBoardFrozen","description":"Sets the frozen state of an OptionBoard.","parameterDecorators":[{"name":"boardId","description":"The id of the OptionBoard.","recommendedTypes":[]},{"name":"frozen","description":"Whether the board will be frozen or not.","recommendedTypes":[]}],"returnDecorators":[],"emittableEvents":[],"readOnly":false},{"signature":"setListingSkew(uint256,uint256)","name":"setListingSkew","description":"Sets the skew of an OptionListing of a frozen OptionBoard.","parameterDecorators":[{"name":"listingId","description":"The id of the listing being modified.","recommendedTypes":[]},{"name":"skew","description":"The new skew value.","recommendedTypes":[]}],"returnDecorators":[],"emittableEvents":[],"readOnly":false},{"signature":"settleOptions(uint256,uint8)","name":"settleOptions","description":"Settles options for expired and liquidated listings. Also functions as the way to reclaim capital for options sold to the market.","parameterDecorators":[{"name":"listingId","description":"The id of the relevant OptionListing.","recommendedTypes":[]},{"name":"tradeType","description":"","recommendedTypes":[]}],"returnDecorators":[],"emittableEvents":[],"readOnly":false},{"signature":"transferOwnership(address)","name":"transferOwnership","description":"Transfer this contract ownership to `newOwner`.","parameterDecorators":[{"name":"newOwner","description":"The address of the new contract owner.","recommendedTypes":[]}],"returnDecorators":[],"emittableEvents":[],"readOnly":false}]}
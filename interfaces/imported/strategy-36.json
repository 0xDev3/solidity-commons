{"schema":"../schema.json","tags":["strategies"],"name":"Strategy","description":"","eventDecorators":[{"signature":"EmergencyExitEnabled()","name":"EmergencyExitEnabled","description":"","parameterDecorators":[]},{"signature":"Harvested(uint256,uint256,uint256,uint256)","name":"Harvested","description":"","parameterDecorators":[{"name":"profit","description":"","recommendedTypes":[],"indexed":false},{"name":"loss","description":"","recommendedTypes":[],"indexed":false},{"name":"debtPayment","description":"","recommendedTypes":[],"indexed":false},{"name":"debtOutstanding","description":"","recommendedTypes":[],"indexed":false}]},{"signature":"UpdatedDebtThreshold(uint256)","name":"UpdatedDebtThreshold","description":"","parameterDecorators":[{"name":"debtThreshold","description":"","recommendedTypes":[],"indexed":false}]},{"signature":"UpdatedKeeper(address)","name":"UpdatedKeeper","description":"","parameterDecorators":[{"name":"newKeeper","description":"","recommendedTypes":[],"indexed":false}]},{"signature":"UpdatedProfitFactor(uint256)","name":"UpdatedProfitFactor","description":"","parameterDecorators":[{"name":"profitFactor","description":"","recommendedTypes":[],"indexed":false}]},{"signature":"UpdatedReportDelay(uint256)","name":"UpdatedReportDelay","description":"","parameterDecorators":[{"name":"delay","description":"","recommendedTypes":[],"indexed":false}]},{"signature":"UpdatedRewards(address)","name":"UpdatedRewards","description":"","parameterDecorators":[{"name":"rewards","description":"","recommendedTypes":[],"indexed":false}]},{"signature":"UpdatedStrategist(address)","name":"UpdatedStrategist","description":"","parameterDecorators":[{"name":"newStrategist","description":"","recommendedTypes":[],"indexed":false}]}],"functionDecorators":[{"signature":"VAIToken()","name":"VAIToken","description":"","parameterDecorators":[],"returnDecorators":[{"name":"param0","description":"","recommendedTypes":[],"solidityType":"address"}],"emittableEvents":[],"readOnly":true},{"signature":"XVSToken()","name":"XVSToken","description":"","parameterDecorators":[],"returnDecorators":[{"name":"param0","description":"","recommendedTypes":[],"solidityType":"address"}],"emittableEvents":[],"readOnly":true},{"signature":"apiVersion()","name":"apiVersion","description":"Used to track which version of `StrategyAPI` this Strategy implements. The Strategy's version must match the Vault's `API_VERSION`.","parameterDecorators":[],"returnDecorators":[{"name":"_0","description":"A string which holds the current API version of this contract.","recommendedTypes":[],"solidityType":"string"}],"emittableEvents":[],"readOnly":true},{"signature":"balanceOfStake()","name":"balanceOfStake","description":"","parameterDecorators":[],"returnDecorators":[{"name":"param0","description":"","recommendedTypes":[],"solidityType":"uint256"}],"emittableEvents":[],"readOnly":true},{"signature":"balanceOfWant()","name":"balanceOfWant","description":"","parameterDecorators":[],"returnDecorators":[{"name":"param0","description":"","recommendedTypes":[],"solidityType":"uint256"}],"emittableEvents":[],"readOnly":true},{"signature":"debtThreshold()","name":"debtThreshold","description":"","parameterDecorators":[],"returnDecorators":[{"name":"param0","description":"","recommendedTypes":[],"solidityType":"uint256"}],"emittableEvents":[],"readOnly":true},{"signature":"delegatedAssets()","name":"delegatedAssets","description":"The amount (priced in want) of the total assets managed by this strategy should not count towards Yearn's TVL calculations. You can override this field to set it to a non-zero value if some of the assets of this Strategy is somehow delegated inside another part of of Yearn's ecosystem e.g. another Vault. Note that this value must be strictly less than or equal to the amount provided by `estimatedTotalAssets()` below, as the TVL calc will be total assets minus delegated assets.","parameterDecorators":[],"returnDecorators":[{"name":"_0","description":"The amount of assets this strategy manages that should not be included in Yearn's Total Value Locked (TVL) calculation across it's ecosystem.","recommendedTypes":[],"solidityType":"uint256"}],"emittableEvents":[],"readOnly":true},{"signature":"emergencyExit()","name":"emergencyExit","description":"","parameterDecorators":[],"returnDecorators":[{"name":"param0","description":"","recommendedTypes":[],"solidityType":"bool"}],"emittableEvents":[],"readOnly":true},{"signature":"estimatedTotalAssets()","name":"estimatedTotalAssets","description":"Provide an accurate estimate for the total amount of assets (principle + return) that this Strategy is currently managing, denominated in terms of `want` tokens. This total should be \"realizable\" e.g. the total value that could *actually* be obtained from this Strategy if it were to divest its entire position based on current on-chain conditions. Care must be taken in using this function, since it relies on external systems, which could be manipulated by the attacker to give an inflated (or reduced) value produced by this function, based on current on-chain conditions (e.g. this function is possible to influence through flashloan attacks, oracle manipulations, or other DeFi attack mechanisms). It is up to governance to use this function to correctly order this Strategy relative to its peers in the withdrawal queue to minimize losses for the Vault based on sudden withdrawals. This value should be higher than the total debt of the Strategy and higher than its expected value to be \"safe\".","parameterDecorators":[],"returnDecorators":[{"name":"_0","description":"The estimated total assets in this Strategy.","recommendedTypes":[],"solidityType":"uint256"}],"emittableEvents":[],"readOnly":true},{"signature":"harvest()","name":"harvest","description":"Harvests the Strategy, recognizing any profits or losses and adjusting the Strategy's position. In the rare case the Strategy is in emergency shutdown, this will exit the Strategy's position. This may only be called by governance, the strategist, or the keeper. When `harvest()` is called, the Strategy reports to the Vault (via `vault.report()`), so in some cases `harvest()` must be called in order to take in profits, to borrow newly available funds from the Vault, or otherwise adjust its position. In other cases `harvest()` must be called to report to the Vault on the Strategy's position, especially if any losses have occurred.","parameterDecorators":[],"returnDecorators":[],"emittableEvents":[],"readOnly":false},{"signature":"harvestTrigger(uint256)","name":"harvestTrigger","description":"Provide a signal to the keeper that `harvest()` should be called. The keeper will provide the estimated gas cost that they would pay to call `harvest()`, and this function should use that estimate to make a determination if calling it is \"worth it\" for the keeper. This is not the only consideration into issuing this trigger, for example if the position would be negatively affected if `harvest()` is not called shortly, then this can return `true` even if the keeper might be \"at a loss\" (keepers are always reimbursed by Yearn). `callCost` must be priced in terms of `want`. This call and `tendTrigger` should never return `true` at the same time. See `maxReportDelay`, `profitFactor`, `debtThreshold` to adjust the strategist-controlled parameters that will influence whether this call returns `true` or not. These parameters will be used in conjunction with the parameters reported to the Vault (see `params`) to determine if calling `harvest()` is merited. It is expected that an external system will check `harvestTrigger()`. This could be a script run off a desktop or cloud bot (e.g. https://github.com/iearn-finance/yearn-vaults/blob/master/scripts/keep.py), or via an integration with the Keep3r network (e.g. https://github.com/Macarse/GenericKeep3rV2/blob/master/contracts/keep3r/GenericKeep3rV2.sol).","parameterDecorators":[{"name":"callCost","description":"The keeper's estimated cast cost to call `harvest()`.","recommendedTypes":[]}],"returnDecorators":[{"name":"_0","description":"`true` if `harvest()` should be called, `false` otherwise.","recommendedTypes":[],"solidityType":"bool"}],"emittableEvents":[],"readOnly":true},{"signature":"isActive()","name":"isActive","description":"","parameterDecorators":[],"returnDecorators":[{"name":"param0","description":"","recommendedTypes":[],"solidityType":"bool"}],"emittableEvents":[],"readOnly":true},{"signature":"keeper()","name":"keeper","description":"","parameterDecorators":[],"returnDecorators":[{"name":"param0","description":"","recommendedTypes":[],"solidityType":"address"}],"emittableEvents":[],"readOnly":true},{"signature":"maxReportDelay()","name":"maxReportDelay","description":"","parameterDecorators":[],"returnDecorators":[{"name":"param0","description":"","recommendedTypes":[],"solidityType":"uint256"}],"emittableEvents":[],"readOnly":true},{"signature":"migrate(address)","name":"migrate","description":"Transfers all `want` from this Strategy to `_newStrategy`. This may only be called by governance or the Vault. The new Strategy's Vault must be the same as this Strategy's Vault.","parameterDecorators":[{"name":"_newStrategy","description":"The Strategy to migrate to.","recommendedTypes":[]}],"returnDecorators":[],"emittableEvents":[],"readOnly":false},{"signature":"name()","name":"name","description":"This Strategy's name. You can use this field to manage the \"version\" of this Strategy, e.g. `StrategySomethingOrOtherV1`. However, \"API Version\" is managed by `apiVersion()` function above.","parameterDecorators":[],"returnDecorators":[{"name":"_0","description":"This Strategy's name.","recommendedTypes":[],"solidityType":"string"}],"emittableEvents":[],"readOnly":true},{"signature":"pendingReward()","name":"pendingReward","description":"","parameterDecorators":[],"returnDecorators":[{"name":"param0","description":"","recommendedTypes":[],"solidityType":"uint256"}],"emittableEvents":[],"readOnly":true},{"signature":"profitFactor()","name":"profitFactor","description":"","parameterDecorators":[],"returnDecorators":[{"name":"param0","description":"","recommendedTypes":[],"solidityType":"uint256"}],"emittableEvents":[],"readOnly":true},{"signature":"rewards()","name":"rewards","description":"","parameterDecorators":[],"returnDecorators":[{"name":"param0","description":"","recommendedTypes":[],"solidityType":"address"}],"emittableEvents":[],"readOnly":true},{"signature":"router()","name":"router","description":"","parameterDecorators":[],"returnDecorators":[{"name":"param0","description":"","recommendedTypes":[],"solidityType":"address"}],"emittableEvents":[],"readOnly":true},{"signature":"setDebtThreshold(uint256)","name":"setDebtThreshold","description":"Sets how far the Strategy can go into loss without a harvest and report being required. By default this is 0, meaning any losses would cause a harvest which will subsequently report the loss to the Vault for tracking. (See `harvestTrigger()` for more details.) This may only be called by governance or the strategist.","parameterDecorators":[{"name":"_debtThreshold","description":"How big of a loss this Strategy may carry without being required to report to the Vault.","recommendedTypes":[]}],"returnDecorators":[],"emittableEvents":[],"readOnly":false},{"signature":"setEmergencyExit()","name":"setEmergencyExit","description":"Activates emergency exit. Once activated, the Strategy will exit its position upon the next harvest, depositing all funds into the Vault as quickly as is reasonable given on-chain conditions. This may only be called by governance or the strategist. See `vault.setEmergencyShutdown()` and `harvest()` for further details.","parameterDecorators":[],"returnDecorators":[],"emittableEvents":[],"readOnly":false},{"signature":"setKeeper(address)","name":"setKeeper","description":"Used to change `keeper`. `keeper` is the only address that may call `tend()` or `harvest()`, other than `governance()` or `strategist`. However, unlike `governance()` or `strategist`, `keeper` may *only* call `tend()` and `harvest()`, and no other authorized functions, following the principle of least privilege. This may only be called by governance or the strategist.","parameterDecorators":[{"name":"_keeper","description":"The new address to assign as `keeper`.","recommendedTypes":[]}],"returnDecorators":[],"emittableEvents":[],"readOnly":false},{"signature":"setMaxReportDelay(uint256)","name":"setMaxReportDelay","description":"Used to change `maxReportDelay`. `maxReportDelay` is the maximum number of blocks that should pass for `harvest()` to be called. For external keepers (such as the Keep3r network), this is the maximum time between jobs to wait. (see `harvestTrigger()` for more details.) This may only be called by governance or the strategist.","parameterDecorators":[{"name":"_delay","description":"The maximum number of seconds to wait between harvests.","recommendedTypes":[]}],"returnDecorators":[],"emittableEvents":[],"readOnly":false},{"signature":"setProfitFactor(uint256)","name":"setProfitFactor","description":"Used to change `profitFactor`. `profitFactor` is used to determine if it's worthwhile to harvest, given gas costs. (See `harvestTrigger()` for more details.) This may only be called by governance or the strategist.","parameterDecorators":[{"name":"_profitFactor","description":"A ratio to multiply anticipated `harvest()` gas cost against.","recommendedTypes":[]}],"returnDecorators":[],"emittableEvents":[],"readOnly":false},{"signature":"setRewards(address)","name":"setRewards","description":"Used to change `rewards`. Any distributed rewards will cease flowing to the old address and begin flowing to this address once the change is in effect. This may only be called by the strategist.","parameterDecorators":[{"name":"_rewards","description":"The address to use for collecting rewards.","recommendedTypes":[]}],"returnDecorators":[],"emittableEvents":[],"readOnly":false},{"signature":"setRouter(address)","name":"setRouter","description":"","parameterDecorators":[{"name":"routerNew","description":"","recommendedTypes":[]}],"returnDecorators":[],"emittableEvents":[],"readOnly":false},{"signature":"setStrategist(address)","name":"setStrategist","description":"Used to change `strategist`. This may only be called by governance or the existing strategist.","parameterDecorators":[{"name":"_strategist","description":"The new address to assign as `strategist`.","recommendedTypes":[]}],"returnDecorators":[],"emittableEvents":[],"readOnly":false},{"signature":"setSwapPath(address[])","name":"setSwapPath","description":"","parameterDecorators":[{"name":"swapPathNew","description":"","recommendedTypes":[]}],"returnDecorators":[],"emittableEvents":[],"readOnly":false},{"signature":"strategist()","name":"strategist","description":"","parameterDecorators":[],"returnDecorators":[{"name":"param0","description":"","recommendedTypes":[],"solidityType":"address"}],"emittableEvents":[],"readOnly":true},{"signature":"sweep(address)","name":"sweep","description":"Removes tokens from this Strategy that are not the type of tokens managed by this Strategy. This may be used in case of accidentally sending the wrong kind of token to this Strategy. Tokens will be sent to `governance()`. This will fail if an attempt is made to sweep `want`, or any tokens that are protected by this Strategy. This may only be called by governance. Implement `protectedTokens()` to specify any additional tokens that should be protected from sweeping in addition to `want`.","parameterDecorators":[{"name":"_token","description":"The token to transfer out of this vault.","recommendedTypes":[]}],"returnDecorators":[],"emittableEvents":[],"readOnly":false},{"signature":"tend()","name":"tend","description":"Adjust the Strategy's position. The purpose of tending isn't to realize gains, but to maximize yield by reinvesting any returns. See comments on `adjustPosition()`. This may only be called by governance, the strategist, or the keeper.","parameterDecorators":[],"returnDecorators":[],"emittableEvents":[],"readOnly":false},{"signature":"tendTrigger(uint256)","name":"tendTrigger","description":"Provide a signal to the keeper that `tend()` should be called. The keeper will provide the estimated gas cost that they would pay to call `tend()`, and this function should use that estimate to make a determination if calling it is \"worth it\" for the keeper. This is not the only consideration into issuing this trigger, for example if the position would be negatively affected if `tend()` is not called shortly, then this can return `true` even if the keeper might be \"at a loss\" (keepers are always reimbursed by Yearn). `callCost` must be priced in terms of `want`. This call and `harvestTrigger()` should never return `true` at the same time.","parameterDecorators":[{"name":"callCost","description":"The keeper's estimated cast cost to call `tend()`.","recommendedTypes":[]}],"returnDecorators":[{"name":"_0","description":"`true` if `tend()` should be called, `false` otherwise.","recommendedTypes":[],"solidityType":"bool"}],"emittableEvents":[],"readOnly":true},{"signature":"vaiVault()","name":"vaiVault","description":"","parameterDecorators":[],"returnDecorators":[{"name":"param0","description":"","recommendedTypes":[],"solidityType":"address"}],"emittableEvents":[],"readOnly":true},{"signature":"vault()","name":"vault","description":"","parameterDecorators":[],"returnDecorators":[{"name":"param0","description":"","recommendedTypes":[],"solidityType":"address"}],"emittableEvents":[],"readOnly":true},{"signature":"want()","name":"want","description":"","parameterDecorators":[],"returnDecorators":[{"name":"param0","description":"","recommendedTypes":[],"solidityType":"address"}],"emittableEvents":[],"readOnly":true},{"signature":"withdraw(uint256)","name":"withdraw","description":"Withdraws `_amountNeeded` to `vault`. This may only be called by the Vault.","parameterDecorators":[{"name":"_amountNeeded","description":"How much `want` to withdraw.","recommendedTypes":[]}],"returnDecorators":[{"name":"_loss","description":"Any realized losses.","recommendedTypes":[],"solidityType":"uint256"}],"emittableEvents":[],"readOnly":false},{"signature":"xvsToVaiPath(uint256)","name":"xvsToVaiPath","description":"","parameterDecorators":[{"name":"param0","description":"","recommendedTypes":[]}],"returnDecorators":[{"name":"param0","description":"","recommendedTypes":[],"solidityType":"address"}],"emittableEvents":[],"readOnly":true}]}
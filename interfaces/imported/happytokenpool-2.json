{"schema":"../schema.json","tags":["tokens"],"name":"HappyTokenPool","description":"","eventDecorators":[{"signature":"ClaimSuccess(bytes32,address,uint256,uint256,address)","name":"ClaimSuccess","description":"event Withdrawal emit on every SafeWithdraw.","parameterDecorators":[{"name":"id","description":"","recommendedTypes":[],"indexed":false},{"name":"claimer","description":"","recommendedTypes":[],"indexed":false},{"name":"timestamp","description":"","recommendedTypes":[],"indexed":false},{"name":"to_value","description":"","recommendedTypes":[],"indexed":false},{"name":"token_address","description":"","recommendedTypes":[],"indexed":false}]},{"signature":"DestructSuccess(bytes32,address,uint256,uint128[])","name":"DestructSuccess","description":"event Withdrawal emit on every SafeWithdraw.","parameterDecorators":[{"name":"id","description":"","recommendedTypes":[],"indexed":false},{"name":"token_address","description":"","recommendedTypes":[],"indexed":false},{"name":"remaining_balance","description":"","recommendedTypes":[],"indexed":false},{"name":"exchanged_values","description":"","recommendedTypes":[],"indexed":false}]},{"signature":"FillSuccess(uint256,bytes32,address,uint256,address,string)","name":"FillSuccess","description":"event Withdrawal emit on every SafeWithdraw.","parameterDecorators":[{"name":"total","description":"","recommendedTypes":[],"indexed":false},{"name":"id","description":"","recommendedTypes":[],"indexed":false},{"name":"creator","description":"","recommendedTypes":[],"indexed":false},{"name":"creation_time","description":"","recommendedTypes":[],"indexed":false},{"name":"token_address","description":"","recommendedTypes":[],"indexed":false},{"name":"message","description":"","recommendedTypes":[],"indexed":false}]},{"signature":"SwapSuccess(bytes32,address,address,address,uint256,uint256)","name":"SwapSuccess","description":"event Withdrawal emit on every SafeWithdraw.","parameterDecorators":[{"name":"id","description":"","recommendedTypes":[],"indexed":false},{"name":"swapper","description":"","recommendedTypes":[],"indexed":false},{"name":"from_address","description":"","recommendedTypes":[],"indexed":false},{"name":"to_address","description":"","recommendedTypes":[],"indexed":false},{"name":"from_value","description":"","recommendedTypes":[],"indexed":false},{"name":"to_value","description":"","recommendedTypes":[],"indexed":false}]},{"signature":"WithdrawSuccess(bytes32,address,uint256)","name":"WithdrawSuccess","description":"event Withdrawal emit on every SafeWithdraw.","parameterDecorators":[{"name":"id","description":"","recommendedTypes":[],"indexed":false},{"name":"token_address","description":"","recommendedTypes":[],"indexed":false},{"name":"withdraw_balance","description":"","recommendedTypes":[],"indexed":false}]}],"functionDecorators":[{"signature":"check_availability(bytes32)","name":"check_availability","description":"check_availability() returns a bunch of pool info given a pool id id swap pool id this function returns 1. exchange_addrs that can be used to determine the index 2. remaining target tokens 3. if started 4. if ended 5. swapped amount of the query address 5. exchanged amount of each token*.","parameterDecorators":[{"name":"id","description":"","recommendedTypes":[]}],"returnDecorators":[{"name":"exchange_addrs","description":"","recommendedTypes":[],"solidityType":"address[]"},{"name":"remaining","description":"","recommendedTypes":[],"solidityType":"uint256"},{"name":"started","description":"","recommendedTypes":[],"solidityType":"bool"},{"name":"expired","description":"","recommendedTypes":[],"solidityType":"bool"},{"name":"unlocked","description":"","recommendedTypes":[],"solidityType":"bool"},{"name":"unlock_time","description":"","recommendedTypes":[],"solidityType":"uint256"},{"name":"swapped","description":"","recommendedTypes":[],"solidityType":"uint256"},{"name":"exchanged_tokens","description":"","recommendedTypes":[],"solidityType":"uint128[]"}],"emittableEvents":[],"readOnly":true},{"signature":"claim(bytes32[])","name":"claim","description":"","parameterDecorators":[{"name":"ito_ids","description":"","recommendedTypes":[]}],"returnDecorators":[],"emittableEvents":[],"readOnly":false},{"signature":"contract_creator()","name":"contract_creator","description":"","parameterDecorators":[],"returnDecorators":[{"name":"param0","description":"","recommendedTypes":[],"solidityType":"address"}],"emittableEvents":[],"readOnly":true},{"signature":"destruct(bytes32)","name":"destruct","description":"destruct() destructs the given pool given the pool id id swap pool id this function can only be called by the pool creator. after validation, it transfers all the remaining token (if any) and all the swapped tokens to the pool creator. it will then destruct the pool by reseting almost all the variables to zero to get the gas refund. note that this function may not work if a pool needs to transfer over ~200 tokens back to the address due to the block gas limit. we have another function withdraw() to help the pool creator to withdraw a single token *.","parameterDecorators":[{"name":"id","description":"","recommendedTypes":[]}],"returnDecorators":[],"emittableEvents":[],"readOnly":false},{"signature":"fill_pool(bytes32,uint256,uint256,string,address[],uint128[],uint256,address,uint256,uint256,address)","name":"fill_pool","description":"fill_pool() creates a swap pool with specific parameters from input _hash sha3-256(password) _start start time delta, real start time = base_time + _start _end end time delta, real end time = base_time + _end message swap pool creation message, only stored in FillSuccess event _exchange_addrs swap token list (0x0 for ETH, only supports ETH and ERC20 now) _ratios swap pair ratio list _unlock_time unlock time delta real unlock time = base_time + _unlock_time _token_addr swap target token address _total_tokens target token total swap amount _limit target token single swap limit _qualification the qualification contract address based on IQLF to determine qualification This function takes the above parameters and creates the pool. _total_tokens of the target token will be successfully transferred to this contract securely on a successful run of this function.*.","parameterDecorators":[{"name":"_hash","description":"","recommendedTypes":[]},{"name":"_start","description":"","recommendedTypes":[]},{"name":"_end","description":"","recommendedTypes":[]},{"name":"message","description":"","recommendedTypes":[]},{"name":"_exchange_addrs","description":"","recommendedTypes":[]},{"name":"_ratios","description":"","recommendedTypes":[]},{"name":"_unlock_time","description":"","recommendedTypes":[]},{"name":"_token_addr","description":"","recommendedTypes":[]},{"name":"_total_tokens","description":"","recommendedTypes":[]},{"name":"_limit","description":"","recommendedTypes":[]},{"name":"_qualification","description":"","recommendedTypes":[]}],"returnDecorators":[],"emittableEvents":[],"readOnly":false},{"signature":"setUnlockTime(bytes32,uint256)","name":"setUnlockTime","description":"","parameterDecorators":[{"name":"id","description":"","recommendedTypes":[]},{"name":"_unlock_time","description":"","recommendedTypes":[]}],"returnDecorators":[],"emittableEvents":[],"readOnly":false},{"signature":"swap(bytes32,bytes32,bytes32,uint256,uint128)","name":"swap","description":"swap() allows users to swap tokens in a swap pool id swap pool id verification sha3-256(sha3-256(password)[:40]+swapper_address) validation sha3-256(swapper_address) exchange_addr_i the index of the exchange address of the list input_total the input amount of the specific token This function is called by the swapper who approves the specific ERC20 or directly transfer the ETH first and wants to swap the desired amount of the target token. The swapped amount is calculated based on the pool ratio. After swap successfully, the same account can not swap the same pool again.*.","parameterDecorators":[{"name":"id","description":"","recommendedTypes":[]},{"name":"verification","description":"","recommendedTypes":[]},{"name":"validation","description":"","recommendedTypes":[]},{"name":"exchange_addr_i","description":"","recommendedTypes":[]},{"name":"input_total","description":"","recommendedTypes":[]}],"returnDecorators":[{"name":"swapped","description":"","recommendedTypes":[],"solidityType":"uint256"}],"emittableEvents":[],"readOnly":false},{"signature":"withdraw(bytes32,uint256)","name":"withdraw","description":"withdraw() transfers out a single token after a pool is expired or empty id swap pool id addr_i withdraw token index this function can only be called by the pool creator. after validation, it transfers the addr_i th token out to the pool creator address.*.","parameterDecorators":[{"name":"id","description":"","recommendedTypes":[]},{"name":"addr_i","description":"","recommendedTypes":[]}],"returnDecorators":[],"emittableEvents":[],"readOnly":false}]}
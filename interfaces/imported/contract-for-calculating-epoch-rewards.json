{"schema":"../schema.json","tags":[],"name":"EpochRewards","description":"Contract for calculating epoch rewards.","eventDecorators":[{"signature":"CarbonOffsettingFundSet(address,uint256)","name":"CarbonOffsettingFundSet","description":"Emitted after bundle swap.","parameterDecorators":[{"name":"partner","description":"","recommendedTypes":[],"indexed":true},{"name":"fraction","description":"","recommendedTypes":[],"indexed":false}]},{"signature":"CommunityRewardFractionSet(uint256)","name":"CommunityRewardFractionSet","description":"Emitted after bundle swap.","parameterDecorators":[{"name":"fraction","description":"","recommendedTypes":[],"indexed":false}]},{"signature":"OwnershipTransferred(address,address)","name":"OwnershipTransferred","description":"Emitted after bundle swap.","parameterDecorators":[{"name":"previousOwner","description":"","recommendedTypes":[],"indexed":true},{"name":"newOwner","description":"","recommendedTypes":[],"indexed":true}]},{"signature":"RegistrySet(address)","name":"RegistrySet","description":"Emitted after bundle swap.","parameterDecorators":[{"name":"registryAddress","description":"","recommendedTypes":[],"indexed":true}]},{"signature":"RewardsMultiplierParametersSet(uint256,uint256,uint256)","name":"RewardsMultiplierParametersSet","description":"Emitted after bundle swap.","parameterDecorators":[{"name":"max","description":"","recommendedTypes":[],"indexed":false},{"name":"underspendAdjustmentFactor","description":"","recommendedTypes":[],"indexed":false},{"name":"overspendAdjustmentFactor","description":"","recommendedTypes":[],"indexed":false}]},{"signature":"TargetValidatorEpochPaymentSet(uint256)","name":"TargetValidatorEpochPaymentSet","description":"Emitted after bundle swap.","parameterDecorators":[{"name":"payment","description":"","recommendedTypes":[],"indexed":false}]},{"signature":"TargetVotingGoldFractionSet(uint256)","name":"TargetVotingGoldFractionSet","description":"Emitted after bundle swap.","parameterDecorators":[{"name":"fraction","description":"","recommendedTypes":[],"indexed":false}]},{"signature":"TargetVotingYieldParametersSet(uint256,uint256)","name":"TargetVotingYieldParametersSet","description":"Emitted after bundle swap.","parameterDecorators":[{"name":"max","description":"","recommendedTypes":[],"indexed":false},{"name":"adjustmentFactor","description":"","recommendedTypes":[],"indexed":false}]},{"signature":"TargetVotingYieldSet(uint256)","name":"TargetVotingYieldSet","description":"Emitted after bundle swap.","parameterDecorators":[{"name":"target","description":"","recommendedTypes":[],"indexed":false}]},{"signature":"TargetVotingYieldUpdated(uint256)","name":"TargetVotingYieldUpdated","description":"Emitted after bundle swap.","parameterDecorators":[{"name":"fraction","description":"","recommendedTypes":[],"indexed":false}]}],"functionDecorators":[{"signature":"calculateTargetEpochRewards()","name":"calculateTargetEpochRewards","description":"Calculates the per validator epoch payment and the total rewards to voters.","parameterDecorators":[],"returnDecorators":[{"name":"param0","description":"","recommendedTypes":[],"solidityType":"uint256"},{"name":"param1","description":"","recommendedTypes":[],"solidityType":"uint256"},{"name":"param2","description":"","recommendedTypes":[],"solidityType":"uint256"},{"name":"param3","description":"","recommendedTypes":[],"solidityType":"uint256"}],"emittableEvents":[],"readOnly":true},{"signature":"carbonOffsettingPartner()","name":"carbonOffsettingPartner","description":"","parameterDecorators":[],"returnDecorators":[{"name":"param0","description":"","recommendedTypes":[],"solidityType":"address"}],"emittableEvents":[],"readOnly":true},{"signature":"checkProofOfPossession(address,bytes,bytes)","name":"checkProofOfPossession","description":"Checks a BLS proof of possession.","parameterDecorators":[{"name":"sender","description":"The address signed by the BLS key to generate the proof of possession.","recommendedTypes":[]},{"name":"blsKey","description":"The BLS public key that the validator is using for consensus, should pass proof of possession. 48 bytes.","recommendedTypes":[]},{"name":"blsPop","description":"The BLS public key proof-of-possession, which consists of a signature on the account address. 96 bytes.","recommendedTypes":[]}],"returnDecorators":[{"name":"param0","description":"","recommendedTypes":[],"solidityType":"bool"}],"emittableEvents":[],"readOnly":true},{"signature":"fractionMulExp(uint256,uint256,uint256,uint256,uint256,uint256)","name":"fractionMulExp","description":"calculate a * b^x for fractions a, b to `decimals` precision.","parameterDecorators":[{"name":"aNumerator","description":"Numerator of first fraction.","recommendedTypes":[]},{"name":"aDenominator","description":"Denominator of first fraction.","recommendedTypes":[]},{"name":"bNumerator","description":"Numerator of exponentiated fraction.","recommendedTypes":[]},{"name":"bDenominator","description":"Denominator of exponentiated fraction.","recommendedTypes":[]},{"name":"exponent","description":"exponent to raise b to.","recommendedTypes":[]},{"name":"_decimals","description":"precision.","recommendedTypes":[]}],"returnDecorators":[{"name":"param0","description":"","recommendedTypes":[],"solidityType":"uint256"},{"name":"param1","description":"","recommendedTypes":[],"solidityType":"uint256"}],"emittableEvents":[],"readOnly":true},{"signature":"getBlockNumberFromHeader(bytes)","name":"getBlockNumberFromHeader","description":"Parses block number out of header.","parameterDecorators":[{"name":"header","description":"RLP encoded header.","recommendedTypes":[]}],"returnDecorators":[{"name":"param0","description":"","recommendedTypes":[],"solidityType":"uint256"}],"emittableEvents":[],"readOnly":true},{"signature":"getCarbonOffsettingFraction()","name":"getCarbonOffsettingFraction","description":"Returns the carbon offsetting partner reward fraction.","parameterDecorators":[],"returnDecorators":[{"name":"param0","description":"","recommendedTypes":[],"solidityType":"uint256"}],"emittableEvents":[],"readOnly":true},{"signature":"getCommunityRewardFraction()","name":"getCommunityRewardFraction","description":"Returns the community reward fraction.","parameterDecorators":[],"returnDecorators":[{"name":"param0","description":"","recommendedTypes":[],"solidityType":"uint256"}],"emittableEvents":[],"readOnly":true},{"signature":"getEpochNumber()","name":"getEpochNumber","description":"Returns the epoch number at a block.","parameterDecorators":[],"returnDecorators":[{"name":"param0","description":"","recommendedTypes":[],"solidityType":"uint256"}],"emittableEvents":[],"readOnly":true},{"signature":"getEpochNumberOfBlock(uint256)","name":"getEpochNumberOfBlock","description":"Returns the epoch number at a block.","parameterDecorators":[{"name":"blockNumber","description":"Block number where epoch number is calculated.","recommendedTypes":[]}],"returnDecorators":[{"name":"param0","description":"","recommendedTypes":[],"solidityType":"uint256"}],"emittableEvents":[],"readOnly":true},{"signature":"getEpochSize()","name":"getEpochSize","description":"Returns the current epoch size in blocks.","parameterDecorators":[],"returnDecorators":[{"name":"param0","description":"","recommendedTypes":[],"solidityType":"uint256"}],"emittableEvents":[],"readOnly":true},{"signature":"getParentSealBitmap(uint256)","name":"getParentSealBitmap","description":"Gets the parent seal bitmap from the header at the given block number.","parameterDecorators":[{"name":"blockNumber","description":"Block number to retrieve. Must be within 4 epochs of the current number.","recommendedTypes":[]}],"returnDecorators":[{"name":"param0","description":"","recommendedTypes":[],"solidityType":"bytes32"}],"emittableEvents":[],"readOnly":true},{"signature":"getRewardsMultiplier()","name":"getRewardsMultiplier","description":"Returns the rewards multiplier based on the current and target Gold supplies.","parameterDecorators":[],"returnDecorators":[{"name":"param0","description":"","recommendedTypes":[],"solidityType":"uint256"}],"emittableEvents":[],"readOnly":true},{"signature":"getRewardsMultiplierParameters()","name":"getRewardsMultiplierParameters","description":"Returns the rewards multiplier parameters.","parameterDecorators":[],"returnDecorators":[{"name":"param0","description":"","recommendedTypes":[],"solidityType":"uint256"},{"name":"param1","description":"","recommendedTypes":[],"solidityType":"uint256"},{"name":"param2","description":"","recommendedTypes":[],"solidityType":"uint256"}],"emittableEvents":[],"readOnly":true},{"signature":"getTargetGoldTotalSupply()","name":"getTargetGoldTotalSupply","description":"Returns the target Gold supply according to the epoch rewards target schedule.","parameterDecorators":[],"returnDecorators":[{"name":"param0","description":"","recommendedTypes":[],"solidityType":"uint256"}],"emittableEvents":[],"readOnly":true},{"signature":"getTargetTotalEpochPaymentsInGold()","name":"getTargetTotalEpochPaymentsInGold","description":"Returns the total target epoch payments to validators, converted to Gold.","parameterDecorators":[],"returnDecorators":[{"name":"param0","description":"","recommendedTypes":[],"solidityType":"uint256"}],"emittableEvents":[],"readOnly":true},{"signature":"getTargetVoterRewards()","name":"getTargetVoterRewards","description":"Returns the total target epoch rewards for voters.","parameterDecorators":[],"returnDecorators":[{"name":"param0","description":"","recommendedTypes":[],"solidityType":"uint256"}],"emittableEvents":[],"readOnly":true},{"signature":"getTargetVotingGoldFraction()","name":"getTargetVotingGoldFraction","description":"Returns the target voting Gold fraction.","parameterDecorators":[],"returnDecorators":[{"name":"param0","description":"","recommendedTypes":[],"solidityType":"uint256"}],"emittableEvents":[],"readOnly":true},{"signature":"getTargetVotingYieldParameters()","name":"getTargetVotingYieldParameters","description":"Returns the target voting yield parameters.","parameterDecorators":[],"returnDecorators":[{"name":"param0","description":"","recommendedTypes":[],"solidityType":"uint256"},{"name":"param1","description":"","recommendedTypes":[],"solidityType":"uint256"},{"name":"param2","description":"","recommendedTypes":[],"solidityType":"uint256"}],"emittableEvents":[],"readOnly":true},{"signature":"getVerifiedSealBitmapFromHeader(bytes)","name":"getVerifiedSealBitmapFromHeader","description":"Verifies the BLS signature on the header and returns the seal bitmap. The validator set used for verification is retrieved based on the parent hash field of the header. If the parent hash is not in the blockchain, verification fails.","parameterDecorators":[{"name":"header","description":"RLP encoded header.","recommendedTypes":[]}],"returnDecorators":[{"name":"param0","description":"","recommendedTypes":[],"solidityType":"bytes32"}],"emittableEvents":[],"readOnly":true},{"signature":"getVersionNumber()","name":"getVersionNumber","description":"Returns the storage, major, minor, and patch version of the contract.","parameterDecorators":[],"returnDecorators":[{"name":"param0","description":"","recommendedTypes":[],"solidityType":"uint256"},{"name":"param1","description":"","recommendedTypes":[],"solidityType":"uint256"},{"name":"param2","description":"","recommendedTypes":[],"solidityType":"uint256"},{"name":"param3","description":"","recommendedTypes":[],"solidityType":"uint256"}],"emittableEvents":[],"readOnly":true},{"signature":"getVotingGoldFraction()","name":"getVotingGoldFraction","description":"Returns the fraction of floating Gold being used for voting in validator elections.","parameterDecorators":[],"returnDecorators":[{"name":"param0","description":"","recommendedTypes":[],"solidityType":"uint256"}],"emittableEvents":[],"readOnly":true},{"signature":"hashHeader(bytes)","name":"hashHeader","description":"Computes hash of header.","parameterDecorators":[{"name":"header","description":"RLP encoded header.","recommendedTypes":[]}],"returnDecorators":[{"name":"param0","description":"","recommendedTypes":[],"solidityType":"bytes32"}],"emittableEvents":[],"readOnly":true},{"signature":"initialize(address,uint256,uint256,uint256,uint256,uint256,uint256,uint256,uint256,uint256,address,uint256)","name":"initialize","description":"Used in place of the constructor to allow the contract to be upgradable via proxy. Should be called only once.","parameterDecorators":[{"name":"registryAddress","description":"The address of the registry contract.","recommendedTypes":[]},{"name":"targetVotingYieldInitial","description":"The initial relative target block reward for voters.","recommendedTypes":[]},{"name":"targetVotingYieldMax","description":"The max relative target block reward for voters.","recommendedTypes":[]},{"name":"targetVotingYieldAdjustmentFactor","description":"The target block reward adjustment factor for voters.","recommendedTypes":[]},{"name":"rewardsMultiplierMax","description":"The max multiplier on target epoch rewards.","recommendedTypes":[]},{"name":"rewardsMultiplierUnderspendAdjustmentFactor","description":"Adjusts the multiplier on target epoch rewards when the protocol is running behind the target Gold supply.","recommendedTypes":[]},{"name":"rewardsMultiplierOverspendAdjustmentFactor","description":"Adjusts the multiplier on target epoch rewards when the protocol is running ahead of the target Gold supply.","recommendedTypes":[]},{"name":"_targetVotingGoldFraction","description":"The percentage of floating Gold voting to target.","recommendedTypes":[]},{"name":"_targetValidatorEpochPayment","description":"The target validator epoch payment.","recommendedTypes":[]},{"name":"_communityRewardFraction","description":"The percentage of rewards that go the community funds.","recommendedTypes":[]},{"name":"_carbonOffsettingPartner","description":"The address of the carbon offsetting partner.","recommendedTypes":[]},{"name":"_carbonOffsettingFraction","description":"The percentage of rewards going to carbon offsetting partner.","recommendedTypes":[]}],"returnDecorators":[],"emittableEvents":[],"readOnly":false},{"signature":"initialized()","name":"initialized","description":"","parameterDecorators":[],"returnDecorators":[{"name":"param0","description":"","recommendedTypes":[],"solidityType":"bool"}],"emittableEvents":[],"readOnly":true},{"signature":"isOwner()","name":"isOwner","description":"Returns true if the caller is the current owner.","parameterDecorators":[],"returnDecorators":[{"name":"param0","description":"","recommendedTypes":[],"solidityType":"bool"}],"emittableEvents":[],"readOnly":true},{"signature":"isReserveLow()","name":"isReserveLow","description":"Determines if the reserve is low enough to demand a diversion from the community reward. Targets initial critical ratio of 2 with a linear decline until 25 years have passed where the critical ratio will be 1.","parameterDecorators":[],"returnDecorators":[{"name":"param0","description":"","recommendedTypes":[],"solidityType":"bool"}],"emittableEvents":[],"readOnly":true},{"signature":"minQuorumSize(uint256)","name":"minQuorumSize","description":"Returns the minimum number of required signers for a given block number. Computed in celo-blockchain as int(math.Ceil(float64(2*valSet.Size()) / 3)).","parameterDecorators":[{"name":"blockNumber","description":"","recommendedTypes":[]}],"returnDecorators":[{"name":"param0","description":"","recommendedTypes":[],"solidityType":"uint256"}],"emittableEvents":[],"readOnly":true},{"signature":"minQuorumSizeInCurrentSet()","name":"minQuorumSizeInCurrentSet","description":"Computes byzantine quorum from current validator set size.","parameterDecorators":[],"returnDecorators":[{"name":"param0","description":"","recommendedTypes":[],"solidityType":"uint256"}],"emittableEvents":[],"readOnly":true},{"signature":"numberValidatorsInCurrentSet()","name":"numberValidatorsInCurrentSet","description":"Gets the size of the current elected validator set.","parameterDecorators":[],"returnDecorators":[{"name":"param0","description":"","recommendedTypes":[],"solidityType":"uint256"}],"emittableEvents":[],"readOnly":true},{"signature":"numberValidatorsInSet(uint256)","name":"numberValidatorsInSet","description":"Gets the size of the validator set that must sign the given block number.","parameterDecorators":[{"name":"blockNumber","description":"Block number to retrieve the validator set from.","recommendedTypes":[]}],"returnDecorators":[{"name":"param0","description":"","recommendedTypes":[],"solidityType":"uint256"}],"emittableEvents":[],"readOnly":true},{"signature":"owner()","name":"owner","description":"Returns the address of the current owner.","parameterDecorators":[],"returnDecorators":[{"name":"param0","description":"","recommendedTypes":[],"solidityType":"address"}],"emittableEvents":[],"readOnly":true},{"signature":"registry()","name":"registry","description":"","parameterDecorators":[],"returnDecorators":[{"name":"param0","description":"","recommendedTypes":[],"solidityType":"address"}],"emittableEvents":[],"readOnly":true},{"signature":"renounceOwnership()","name":"renounceOwnership","description":"Leaves the contract without owner. It will not be possible to call `onlyOwner` functions anymore. Can only be called by the current owner. * NOTE: Renouncing ownership will leave the contract without an owner, thereby removing any functionality that is only available to the owner.","parameterDecorators":[],"returnDecorators":[],"emittableEvents":[],"readOnly":false},{"signature":"setCarbonOffsettingFund(address,uint256)","name":"setCarbonOffsettingFund","description":"Sets the carbon offsetting fund.","parameterDecorators":[{"name":"partner","description":"The address of the carbon offsetting partner.","recommendedTypes":[]},{"name":"value","description":"The percentage of the total reward to be sent to the carbon offsetting partner.","recommendedTypes":[]}],"returnDecorators":[{"name":"param0","description":"","recommendedTypes":[],"solidityType":"bool"}],"emittableEvents":[],"readOnly":false},{"signature":"setCommunityRewardFraction(uint256)","name":"setCommunityRewardFraction","description":"Sets the community reward percentage.","parameterDecorators":[{"name":"value","description":"The percentage of the total reward to be sent to the community funds.","recommendedTypes":[]}],"returnDecorators":[{"name":"param0","description":"","recommendedTypes":[],"solidityType":"bool"}],"emittableEvents":[],"readOnly":false},{"signature":"setRegistry(address)","name":"setRegistry","description":"Updates the address pointing to a Registry contract.","parameterDecorators":[{"name":"registryAddress","description":"The address of a registry contract for routing to other contracts.","recommendedTypes":[]}],"returnDecorators":[],"emittableEvents":[],"readOnly":false},{"signature":"setRewardsMultiplierParameters(uint256,uint256,uint256)","name":"setRewardsMultiplierParameters","description":"Sets the rewards multiplier parameters.","parameterDecorators":[{"name":"max","description":"The max multiplier on target epoch rewards.","recommendedTypes":[]},{"name":"underspendAdjustmentFactor","description":"Adjusts the multiplier on target epoch rewards when the protocol is running behind the target Gold supply.","recommendedTypes":[]},{"name":"overspendAdjustmentFactor","description":"Adjusts the multiplier on target epoch rewards when the protocol is running ahead of the target Gold supply.","recommendedTypes":[]}],"returnDecorators":[{"name":"param0","description":"","recommendedTypes":[],"solidityType":"bool"}],"emittableEvents":[],"readOnly":false},{"signature":"setTargetValidatorEpochPayment(uint256)","name":"setTargetValidatorEpochPayment","description":"Sets the target per-epoch payment in Celo Dollars for validators.","parameterDecorators":[{"name":"value","description":"The value in Celo Dollars.","recommendedTypes":[]}],"returnDecorators":[{"name":"param0","description":"","recommendedTypes":[],"solidityType":"bool"}],"emittableEvents":[],"readOnly":false},{"signature":"setTargetVotingGoldFraction(uint256)","name":"setTargetVotingGoldFraction","description":"Sets the target voting Gold fraction.","parameterDecorators":[{"name":"value","description":"The percentage of floating Gold voting to target.","recommendedTypes":[]}],"returnDecorators":[{"name":"param0","description":"","recommendedTypes":[],"solidityType":"bool"}],"emittableEvents":[],"readOnly":false},{"signature":"setTargetVotingYield(uint256)","name":"setTargetVotingYield","description":"Sets the target voting yield. Uses fixed point arithmetic for protection against overflow.","parameterDecorators":[{"name":"targetVotingYield","description":"The relative target block reward for voters.","recommendedTypes":[]}],"returnDecorators":[{"name":"param0","description":"","recommendedTypes":[],"solidityType":"bool"}],"emittableEvents":[],"readOnly":false},{"signature":"setTargetVotingYieldParameters(uint256,uint256)","name":"setTargetVotingYieldParameters","description":"Sets the target voting yield parameters.","parameterDecorators":[{"name":"max","description":"The max relative target block reward for voters.","recommendedTypes":[]},{"name":"adjustmentFactor","description":"The target block reward adjustment factor for voters.","recommendedTypes":[]}],"returnDecorators":[{"name":"param0","description":"","recommendedTypes":[],"solidityType":"bool"}],"emittableEvents":[],"readOnly":false},{"signature":"startTime()","name":"startTime","description":"","parameterDecorators":[],"returnDecorators":[{"name":"param0","description":"","recommendedTypes":[],"solidityType":"uint256"}],"emittableEvents":[],"readOnly":true},{"signature":"targetValidatorEpochPayment()","name":"targetValidatorEpochPayment","description":"","parameterDecorators":[],"returnDecorators":[{"name":"param0","description":"","recommendedTypes":[],"solidityType":"uint256"}],"emittableEvents":[],"readOnly":true},{"signature":"transferOwnership(address)","name":"transferOwnership","description":"Transfers ownership of the contract to a new account (`newOwner`). Can only be called by the current owner.","parameterDecorators":[{"name":"newOwner","description":"","recommendedTypes":[]}],"returnDecorators":[],"emittableEvents":[],"readOnly":false},{"signature":"updateTargetVotingYield()","name":"updateTargetVotingYield","description":"Updates the target voting yield based on the difference between the target and current voting Gold fraction. Only called directly by the protocol.","parameterDecorators":[],"returnDecorators":[],"emittableEvents":[],"readOnly":false},{"signature":"validatorSignerAddressFromCurrentSet(uint256)","name":"validatorSignerAddressFromCurrentSet","description":"Gets a validator address from the current validator set.","parameterDecorators":[{"name":"index","description":"Index of requested validator in the validator set.","recommendedTypes":[]}],"returnDecorators":[{"name":"param0","description":"","recommendedTypes":[],"solidityType":"address"}],"emittableEvents":[],"readOnly":true},{"signature":"validatorSignerAddressFromSet(uint256,uint256)","name":"validatorSignerAddressFromSet","description":"Gets a validator address from the validator set at the given block number.","parameterDecorators":[{"name":"index","description":"Index of requested validator in the validator set.","recommendedTypes":[]},{"name":"blockNumber","description":"Block number to retrieve the validator set from.","recommendedTypes":[]}],"returnDecorators":[{"name":"param0","description":"","recommendedTypes":[],"solidityType":"address"}],"emittableEvents":[],"readOnly":true}]}